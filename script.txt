/* SCRIPT DO BANCO DE DADOS - POLITECH */

/*OBSERVAÇÕES : */
/*UNSIGNED - Quando queremos bloquear inserção de valores negativos em uma coluna utilizamos o parâmetro UNSIGNED. Ou seja, só serão aceitos no referido campo valores maiores ou iguais a zero.*/


/* TABELA DE CLIENTE */

DROP TABLE IF EXISTS cliente;

CREATE TABLE IF NOT EXISTS cliente 
(
	CDCLIENTE int(10) unsigned NOT NULL AUTO_INCREMENT,
	NMCLIENTE varchar(100) not null,
	CPF VARCHAR(14) not null,
	NMPROFISSAO varchar(100) not null,
	DESCRICAO varchar(100) not null,
        OBSERVACAO varchar(200) not null,
	SEXO ENUM('M', 'F') not null,
	TELEFONE VARCHAR(14),
	CELULAR VARCHAR(15),
	CEP VARCHAR(10) not null,
	LOGRADOURO text not null,
	NUMERO int not null,
	COMP text not null,
	BAIRRO varchar(40) not null, 
	CIDADE varchar(40) not null,
	ESTADO ENUM('AC','AL','AP','AM','BA','CE','DF','ES','GO','MA','MS','MG','PA','PB','PR','PE','PI','RJ','RN','RS','RO','RR','SC','SP','SE','TO') not null,
	STATUS ENUM('A', 'D') not null,
        EMAIL varchar(100) not null,
        PRIMARY KEY (CDCLIENTE),
	UNIQUE KEY cliente(CDCLIENTE)
) AUTO_INCREMENT = 1 ;

/* TABELA DE PESSOA JURIDICA*/

DROP TABLE IF EXISTS pessoaJ;

CREATE TABLE IF NOT EXISTS pessoaJ
(
	CDPESSOAJ int(10) unsigned NOT NULL AUTO_INCREMENT,
	NMEMPRESA varchar(100) not null,
	CNPJ VARCHAR(18) not null,
	NMREPRESENTANTE varchar(100) not null,
	SEGMENTO varchar(100) not null,
	DESCRICAO varchar(100) not null,
	OBSERVACAO varchar(200) not null,	
	TELEFONE VARCHAR(14),
	CELULAR VARCHAR(15),
	CEP VARCHAR(10) not null,
	LOGRADOURO text not null,
	NUMERO int not null,
	COMP text not null,
	BAIRRO varchar(40) not null, 
	CIDADE varchar(40) not null,
	ESTADO ENUM('AC','AL','AP','AM','BA','CE','DF','ES','GO','MA','MS','MG','PA','PB','PR','PE','PI','RJ','RN','RS','RO','RR','SC','SP','SE','TO') not null,
	STATUS ENUM('A', 'D') not null,	
	EMAILE varchar(100) not null,
        EMAILR varchar(100) not null,
        CPF VARCHAR(14) not null,
        PRIMARY KEY (CDPESSOAJ),
	UNIQUE KEY cliente(CDPESSOAJ)
) AUTO_INCREMENT = 1 ;


/* TABELA DE USUARIO */

DROP TABLE IF EXISTS usuario;

CREATE TABLE IF NOT EXISTS usuario 
(
    CDUSUARIO int(10) unsigned NOT NULL AUTO_INCREMENT,
    NMUSUARIO varchar(100) NOT NULL,
    SENHA varchar(40) NOT NULL,
    NIVEL ENUM('Administrador', 'Diretor', 'Membro') not null,
	STATUS ENUM('A', 'D') not null,
    PRIMARY KEY (CDUSUARIO),
    KEY (NIVEL) 
)AUTO_INCREMENT = 1 ;


/*TABELA DE CARGO */

DROP TABLE IF EXISTS cargo;

CREATE TABLE IF NOT EXISTS cargo
(
    CDCARGO int(10) unsigned not null AUTO_INCREMENT,
    NMCARGO varchar(70) not null,
    DESCRICAO text,
    STATUS ENUM('A', 'D') not null,
    PRIMARY KEY (CDCARGO),
    UNIQUE KEY (CDCARGO)
)AUTO_INCREMENT = 1;

/* TABELA DE FUNCIONARIOS */
DROP TABLE IF EXISTS funcionario;

CREATE TABLE IF NOT EXISTS funcionario
(
	CDFUNCIONARIO int(10) unsigned not null AUTO_INCREMENT,
	NMFUNCIONARIO varchar(100) not null,
	EMAIL varchar(100) not null,
	CPF VARCHAR(14) not null,
	DTNASC VARCHAR(10) not null,
	SEXO ENUM('M', 'F') not null,
        DTADM VARCHAR(10) not null,
        DTDESLIGAMENTO VARCHAR(10) not null,
	PERIODO ENUM('1', '2', '3', '4', '5', '6', '7', '8', '9', '10') not null,
	CURSO ENUM('Arquitetura e Urbanismo', 'Engenharia Ambiental e Sanitária', 'Engenharia Civil', 'Engenharia Elétrica', 'Engenharia Mecânica', 'Engenharia Metalúrgica', 'Engenharia de Produção', 'Engenharia Química', 'Sistemas de Informação', 'Tecnologia de Soldagem') not null,
	CDCARGO int(10) unsigned not null,
	TELEFONE VARCHAR(14),
	CELULAR VARCHAR(15),
	CEP VARCHAR(10) not null,
	LOGRADOURO text not null,
	NUMERO int not null,
	COMP text not null,
	BAIRRO varchar(40) not null, 
	CIDADE varchar(40) not null,
	ESTADO ENUM('AC','AL','AP','AM','BA','CE','DF','ES','GO','MA','MS','MG','PA','PB','PR','PE','PI','RJ','RN','RS','RO','RR','SC','SP','SE','TO') not null,
	STATUS ENUM('A', 'D') not null,
	FACEBOOK varchar(100) not null,
        LATTES varchar(100) not null,
        LINKEDIN varchar(100) not null,
        OBSERVACAO varchar(200) not null,
        DESCRICAO varchar(100) not null,
        PRIMARY KEY (CDFUNCIONARIO),
	UNIQUE KEY funcionario(CDFUNCIONARIO),
    CONSTRAINT FK_FUNCIONARIO_CDCARGO foreign key (CDCARGO) references cargo(CDCARGO)
) AUTO_INCREMENT = 1 ;


/* TABELA DE FORNECEDOR */

DROP TABLE IF EXISTS fornecedor;

CREATE TABLE IF NOT EXISTS fornecedor
(
	CDFORNECEDOR int(10) unsigned not null AUTO_INCREMENT,
    	NMEMPRESA varchar(100) not null,
	NMCONTATO varchar(100) not null,
    	CARGO varchar(100) not null,
	CEP VARCHAR(10) not null,
	LOGRADOURO text not null,
	NUMERO int not null,
	COMP text not null,
	BAIRRO varchar(40) not null, 
	CIDADE varchar(40) not null,
	ESTADO ENUM('AC','AL','AP','AM','BA','CE','DF','ES','GO','MA','MS','MG','PA','PB','PR','PE','PI','RJ','RN','RS','RO','RR','SC','SP','SE','TO') not null,
        TELEFONE VARCHAR(14),
	CELULAR VARCHAR(15),
	STATUS ENUM('A', 'D') not null,
        PRIMARY KEY (CDFORNECEDOR),
	UNIQUE KEY fornecedor(CDFORNECEDOR)
) AUTO_INCREMENT = 1 ;

/* TABELA DE PROJETOS */

DROP TABLE IF EXISTS projeto;

CREATE TABLE IF NOT EXISTS projeto 
(
	CDPROJETO int(10) unsigned NOT NULL AUTO_INCREMENT,
	NMPROJETO varchar(100) not null,
	DTENTRADA VARCHAR(10) not null,
	DTINICIOPLAN VARCHAR(10) not null,
	DTINICIOREAL VARCHAR(10) not null,
	DTFINAL VARCHAR(10) not null,
	PRECOR float not null,
	PRECOD float not null,
	CDFUNCGERENTE int(10) unsigned not null,
	CDPROFESSOR int(10) unsigned not null,
	AREAPROJ text not null,
	CDFUNCPARTICIPANTE text not null,
	CDFUNCRESPONSAVEL int(10) unsigned not null,
	CDFUNCCOMERCIAL int(10) unsigned not null,
	ATRASO ENUM('Sim', 'Não') not null,
	ATRASOSIM int not null,
	TIPOCLIENTEPROJ text not null,
	CDCLIENTEPROJ int(10) unsigned not null,
	DTASSINATURA VARCHAR(10) not null,
	NUMVISITASTEC int not null,
	CONTRAPROPOSTA ENUM('Sim', 'Não') not null,
	FORMAPAG ENUM ('Dinheiro', 'Transferencia Bancaria', 'Crédito', 'Débito', 'Boleto')not null,
	STATUSPROJ ENUM ('Em andamento', 'Concluido') not null,
	CEP VARCHAR(10) not null,
	LOGRADOURO text not null,
	NUMERO int not null,
	COMP text not null,
	BAIRRO varchar(40) not null, 
	CIDADE varchar(40) not null,
	ESTADO ENUM('AC','AL','AP','AM','BA','CE','DF','ES','GO','MA','MS','MG','PA','PB','PR','PE','PI','RJ','RN','RS','RO','RR','SC','SP','SE','TO') not null,
	STATUS ENUM('A', 'D') not null,
    OBSERVACAO varchar(200) not null,	
	
	PRIMARY KEY (CDPROJETO),
	UNIQUE KEY cliente(CDPROJETO)
) AUTO_INCREMENT = 1 ;


/*TABELA DE CATEGORIA */

DROP TABLE IF EXISTS categoria;

CREATE TABLE IF NOT EXISTS categoria
(
    CDCATEGORIA int(10) unsigned not null AUTO_INCREMENT,
    NMCATEGORIA varchar(30) not null,
    DESCRICAO text,
    STATUS ENUM('A', 'D') not null,
    PRIMARY KEY (CDCATEGORIA),
    UNIQUE KEY (CDCATEGORIA)
)AUTO_INCREMENT = 1;

/*INSERINDO UM CARGO PREDETERMINADO
INSERT INTO cargo (NMCARGO, DESCRICAO) VALUES ('Assessor de Desenvolvimento', 'Trabalha demais da conta')

INSERT INTO usuario (CDUSUARIO, NMUSUARIO, SENHA, NIVEL, STATUS) VALUES ('1', 'fernanda.rezende@politechjr.com', '7c4a8d09ca3762af61e59520943dc26494f8941b', 'Administrador', 'A')

